<html>

<head>
    <title>Professional basket in Spain</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">

    <!--La connexiÃ³ amb l'API de Mapbox-->
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css' rel='stylesheet' />
    <link rel="stylesheet" type="text/css" href="style.css" />

</head>

<body>


    <div id="legend-grapes" class="legend">
        <h4>ğŸ€Spanish Basketball teams - Season 2023-2024</h4>
        <h4>ğŸŒFirst & Second division (ACB and LEB Oro)</h4>
        <div><span style="background-color: green"></span>1st Division (ACB)</div>
        <div><span style="background-color: red"></span>2nd Division (LEB Oro)</div>

        <a href="https://www.acb.com/">
            <h5>ğŸ’¾AsociaciÃ³n de Clubes de Baloncesto EspaÃ±ol fo 1st division (ACB)</h5>
        </a>
        <a href="https://www.feb.es/inicio.aspx">
            <h5>ğŸ’¾Spanish Basketball Federation for 2nd division (LEB Oro) data</h5>
        </a>
        <a href="https://www.linkedin.com/in/%C3%A0lex-cubells-i-barrufet-08336413b/">
            <h5>ğŸ¤ŸğŸ¼ Â© Ã€lex Cubells Barrufet</h5>
        </a>
    </div>


    <!--Creem l'element DIVISION on anirÃ  el nostre mapa-->
    <div id="map"></div>

    <!--Afegim el nostre token d'accÃ¨s a Mapbox-->
    <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoiYWxleGFuZHJvc21hcHMiLCJhIjoiY2xtMDg5MTIzMzJsaTNkcHZmcGc5MXRiaiJ9.7LUzRkxe17ZbG_5lqI2tRg'

        //Creem el nostre mapa
        const map = new mapboxgl.Map({
            container: 'map',
            //Afegim l'estil de mapbox:
            style: 'mapbox://styles/mapbox/navigation-night-v1',
            //El centrem a l'Alt PenedÃ¨s i fem un zoom especial per les nostres dades
            center: [-1.8196269536670213, 40.24098172736026],
            zoom: 5.70

        });

        map.on('load', () => {
            map.addSource('clubsbasket', {
                'type': 'geojson',
                'data': {
                    "type": "FeatureCollection",
                    "name": "clubs_spain",
                    "crs": {
                        "type": "name",
                        "properties": {
                            "name": "urn:ogc:def:crs:OGC:1.3:CRS84"
                        }
                    },
                    "features": [
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "OVIEDO C.B.",
                                "League": "LEB-ORO",
                                "image": "oviedo.jpg"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -5.846848928656382,
                                    43.370539485820132
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "AMICS DEL BASQUET",
                                "League": "LEB-ORO",
                                "image": "castello.jpg"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -0.056611329343264,
                                    39.974300958083134
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "BALONCESTO FUENLABRADA",
                                "League": "LEB-ORO",
                                "image": "fuenlabrada.jpg"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -3.800563429081418,
                                    40.282464342569448
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "CACERES CIUDAD DEL BALONCESTO",
                                "League": "LEB-ORO",
                                "image": "caceres.jpg"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -6.378466636567016,
                                    39.460120967171477
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "CLUB OURENSE BALONCESTO S.A.D.",
                                "League": "LEB-ORO",
                                "image": "ourense.jpg"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -7.864155990147527,
                                    42.31705238273328
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "C.D.Estela",
                                "League": "LEB-ORO",
                                "image": "estela.jpg"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -4.049372666981172,
                                    43.344161605416573
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "CLUB BALONCESTO TIZONA S.A.D.",
                                "League": "LEB-ORO",
                                "image": "tizona.jpg"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -3.671449930891247,
                                    42.345044144083865
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "DONOSTIAKO GIPUZKOA BASKET 2001 S.B.K.E.",
                                "League": "LEB-ORO",
                                "image": "donostia.jpg"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -1.968710952444019,
                                    43.297642474886274
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "CLUB BÃ€SQUET MENORCA",
                                "League": "LEB-ORO",
                                "image": "menorca.jpg"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    4.262603604877379,
                                    39.874745019676539
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "FUNDACIÃ“N LUCENTUM BALONCESTO ALICANTE",
                                "League": "LEB-ORO",
                                "image": "alicante.jpg"

                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -0.492969063813318,
                                    38.356165760552663
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "FORÃ‡A LLEIDA CLUB ESPORTIU",
                                "League": "LEB-ORO",
                                "image": "lleida.jpg"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    0.631597744908264,
                                    41.625929895836855
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "CLUB BASQUET CORUÃ‘A S.A.D.",
                                "League": "LEB-ORO",
                                "image": "corunya.jpg"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -8.415869047810721,
                                    43.369065218102619
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "CLUB MELILLA BALONCESTO",
                                "League": "LEB-ORO",
                                "image": "melilla.jpg"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -2.941021028485838,
                                    35.288676718429627
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "ESTUDIANTES",
                                "League": "LEB-ORO",
                                "image": "estudiantes.jpg"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -3.67179400223677,
                                    40.423862292266001
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "REAL BETIS BALONCESTO SAD",
                                "League": "LEB-ORO",
                                "image": "betis.jpg"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -5.964491589576001,
                                    37.396585508464106
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "C.B. CLAVIJO",
                                "League": "LEB-ORO",
                                "image": "clavijo.jpg"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -2.455873201191157,
                                    42.453036487990644
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "SAN PABLO BURGOS S.A.D.",
                                "League": "LEB-ORO",
                                "image": "spburgos.jpg"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -3.678395188544603,
                                    42.344389072184626
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "CLUB BALONCESTO CIUDAD DE VALLADOLID",
                                "League": "LEB-ORO",
                                "image": "valladolid.jpg"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -4.744737039001262,
                                    41.631564384459686
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "F.C.BARCELONA",
                                "League": "ACB",
                                "image": "barcelona.png"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    2.120089891211862,
                                    41.380038919100883
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "BASKONIA",
                                "League": "ACB",
                                "image": "baskonia.png"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -2.641672218061841,
                                    42.864059803422784
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "BÃ€SQUET GIRONA",
                                "League": "ACB",
                                "image": "girona.png"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    2.810775243031877,
                                    41.990372563268757
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "BÃ€SQUET MANRESA S.A.D.",
                                "League": "ACB",
                                "image": "manresa.png"

                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    1.809536928579043,
                                    41.72533707888946
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "BASKET ZARAGOZA 2022 S.A.D.",
                                "League": "ACB",
                                "image": "zaragoza.png"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -0.866236656250504,
                                    41.635351928293062
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "CLUB DEPORTIVO GRANADA POR EL BALONCESTO",
                                "League": "ACB",
                                "image": "granada.png"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -3.594091720062047,
                                    37.153453424139578
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "CB GRAN CANARIA-CLARET SAD",
                                "League": "ACB",
                                "image": "gcanaria.png"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -15.456945663190263,
                                    28.103016107332301
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "CLUB JOVENTUT BADALONA SAD",
                                "League": "ACB",
                                "image": "badalona.png"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    2.231941431144214,
                                    41.442435430266315
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "CB 1939 CANARIAS SAD - TENERIFE",
                                "League": "ACB",
                                "image": "tenerife.png"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -16.296991251540536,
                                    28.458380977883557
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "OBRADOIRO CLUB DE AMIGOS BALONCESTO SAD",
                                "League": "ACB",
                                "image": "compostela.png"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -8.530721055181385,
                                    42.876197456499391
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "BÃ€SQUET CLUB ANDORRA SAOE",
                                "League": "ACB",
                                "image": "andorra.png"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    1.516581130376438,
                                    42.504873494134635
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "REAL MADRID",
                                "League": "ACB",
                                "image": "madrid.png"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -3.672435808224539,
                                    40.423841934489481
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "C.B. BREOGAN SAD",
                                "League": "ACB",
                                "image": "lugo.png"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -7.545339532306948,
                                    42.991244946318133
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "C.D. BASKET BILBAO BERRI SAD",
                                "League": "ACB",
                                "image": "bilbao.png"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -2.926072100003553,
                                    43.252173361585285
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "UCAM MURCIA CLUB BALONCESTO SAD",
                                "League": "ACB",
                                "image": "murcia.png"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -1.112771186576787,
                                    37.994005275957541
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "BALONCESTO MÃLAGA SAD",
                                "League": "ACB",
                                "image": "malaga.png"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -4.460557548829682,
                                    36.682513901738197
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "VALENCIA BASKET CLUB SAD",
                                "League": "ACB",
                                "image": "valencia.png"

                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -0.366074044743175,
                                    39.451673357256247
                                ]
                            }
                        },
                        {
                            "type": "Feature",
                            "properties": {
                                "name": "CLUB DEPORTIVO MARISTAS - PALENCIA",
                                "League": "ACB",
                                "image": "palencia.png"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [
                                    -4.541811356915781,
                                    42.014620120472948
                                ]
                            }
                        }
                    ]
                }
            });
            map.addLayer(
                {
                    'id': 'clubs',
                    'source': 'clubsbasket',
                    'type': 'circle',
                    'filter': ['==', '$type', 'Point'],

                    'paint': {
                        'circle-radius': 6,
                        //'circle-stroke-width': 2,
                        'circle-color': ['match',
                            ['get', 'League'], 'ACB', 'green', 'red'],
                        //'circle-stroke-color': 'white',

                    }
                });

            // Add markers to the map.
            for (const feature of clubsbasket.data.features) {
                const el = document.createElement('div');
                const width = 32; // Adjust according to your icon size
                const height = 32; // Adjust according to your icon size
                el.className = 'marker';
                el.style.backgroundImage = `url(https://raw.githubusercontent.com/alexandrosmaps/Basketball-clubs-spain/main/img/${width}/${height}/${feature.properties.image})`;
                el.style.width = `${width}px`;
                el.style.height = `${height}px`;
                el.style.backgroundSize = '100%';

                // Add markers to the map.
                new mapboxgl.Marker(el)
                    .setLngLat(feature.geometry.coordinates)
                    .addTo(map);
            }

            //Creem esdeveniment quan es fa click
            map.on('click', 'clubs', (e) => {
                // Copy coordinates array.
                const coordinates = e.features[0].geometry.coordinates.slice();
                const name = e.features[0].properties.name;

                // Ensure that if the map is zoomed out such that multiple
                // copies of the feature are visible, the popup appears
                // over the copy being pointed to.
                while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
                    coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
                }

                new mapboxgl.Popup()
                    .setLngLat(coordinates)
                    .setHTML(name)
                    .addTo(map);
            });

            // Change the cursor to a pointer when the mouse is over the places layer.
            map.on('mouseenter', 'clubs', () => {
                map.getCanvas().style.cursor = 'pointer';
            });

            // Change it back to a pointer when it leaves.
            map.on('mouseleave', 'clubs', () => {
                map.getCanvas().style.cursor = '';
            });



        });

        //Element per posar el mapa a pantalla completa
        map.addControl(new mapboxgl.FullscreenControl(), 'top-right');
        //Element per tenir el control del zoom + - i de navegaciÃ³
        map.addControl(new mapboxgl.NavigationControl(), 'top-right');
    </script>
</body>

</html>